{{ define "main" }}
{{ $pageRes := .Page.Resources.GetMatch "notes.md" }}

{{ if .Site.IsServer }}
{{ printf "<!-- the local development template for chapters/single.html   -->" | safeHTML }}
{{ else }}
{{ printf "<!-- its all the way live! -->" | safeHTML }}
{{ end }}
<section id="main" class="{{ .Params.Type }}">
  <h2 id="title">{{ .Title }}</h2>

  <article id="content">
    {{ .Content }}
  </article>
  {{ if $pageRes }}
  {{$pageRes}}
  <footer class="{{ $pageRes.Params.class }}">
    <h3>{{ $pageRes.Title }}</h3>
    <b>Here are the .Page.Resources:</b> {{ $pageRes.Content }}
  </footer>
  {{ end }}
</section>
<aside id="meta">
  <div>
    <section>
      <h4 id="date"> {{ .Date.Format "Mon Jan 2, 2006" }} </h4>
      <h5 id="wordcount"> {{ .WordCount }} Words </h5>
    </section>
    {{ with .Params.topics }}
    <ul id="topics">
      {{ range . }}
      <li><a href="{{ "topics" | absURL}}{{ . | urlize }}">{{ . }}</a> </li>
      {{ end }}
    </ul>
    {{ end }}
    {{ with .Params.tags }}
    <ul id="tags">
      {{ range . }}
      <li> <a href="{{ "tags" | absURL }}{{ . | urlize }}">{{ . }}</a> </li>
      {{ end }}
    </ul>
    {{ end }}
  </div>
  <div>
    {{ with .PrevInSection }}
    <a class="previous" href="{{.Permalink}}"> {{.Title}}</a>
    {{ end }}
    {{ with .NextInSection }}
    <a class="next" href="{{.Permalink}}"> {{.Title}}</a>
    {{ end }}
  </div>
</aside>
{{ end }}